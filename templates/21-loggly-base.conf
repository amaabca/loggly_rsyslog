# {{ ansible_managed }}

$ModLoad imtcp
$ModLoad imfile
$InputFilePollInterval 10
$PrivDropToGroup root
$InputTCPMaxSessions 500
$InputTCPServerRun 514



# do this in FRONT of the local/regular rules

if $fromhost-ip == '172.20.0.5' then /var/log/f5/f5-1.log

& ~

if $fromhost-ip == '172.20.1.5' then /var/log/f5/f5-2.log

& ~



# Setup disk assisted queues
$WorkDirectory /var/spool/rsyslog # where to place spool files

$template LogglyFormat{{ loggly.application.tag }},"<%pri%>%protocol-version% %timestamp:::date-rfc3339% %HOSTNAME% %app-name% %procid% %msgid% [{{ loggly.token }}@41058 tag=\"{{ loggly.application.tag }}\"] %msg%\n"
